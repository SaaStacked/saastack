// <auto-generated/>
using System;
using Microsoft.Extensions.DependencyInjection;
using Microsoft.AspNetCore.Http;
using Microsoft.AspNetCore.Builder;
using Infrastructure.Web.Api.Operations.Shared.Health;
using Infrastructure.Web.Api.Interfaces;
using Infrastructure.Web.Api.Common.Extensions;
using Common;

namespace ApiHost1
{
    public static class MinimalApiRegistration
    {
        public static void RegisterRoutes(this global::Microsoft.AspNetCore.Builder.WebApplication app)
        {
            var healthapiGroup = app.MapGroup(string.Empty)
                .WithTags("HealthApi")
                .RequireCors("__DefaultCorsPolicy")
                .AddEndpointFilter<global::Infrastructure.Web.Api.Common.Endpoints.HttpRecordingFilter>()
                .AddEndpointFilter<global::Infrastructure.Web.Api.Common.Endpoints.ApiUsageFilter>()
                .AddEndpointFilter<global::Infrastructure.Web.Api.Common.Endpoints.RequestCorrelationFilter>()
                .AddEndpointFilter<global::Infrastructure.Web.Api.Common.Endpoints.ContentNegotiationFilter>();
            healthapiGroup.MapGet("/health",
                async (global::System.IServiceProvider serviceProvider, global::Infrastructure.Web.Api.Operations.Shared.Health.HealthCheckRequest request) =>
                {
                    return await Handle(serviceProvider, request, global::System.Threading.CancellationToken.None);

                    static async Task<global::Microsoft.AspNetCore.Http.IResult> Handle(global::System.IServiceProvider services, global::Infrastructure.Web.Api.Operations.Shared.Health.HealthCheckRequest request, global::System.Threading.CancellationToken cancellationToken)
                    {
                        var api = new global::ApiHost1.Api.Health.HealthApi();
                        var result = await api.Check(request, cancellationToken);
                        return result.HandleApiResult(global::Infrastructure.Web.Api.Interfaces.OperationMethod.Get);
                    }
                })
                .RequireAuthorization("Anonymous")
                .AddEndpointFilter<global::Infrastructure.Web.Api.Common.Endpoints.ValidationFilter<global::Infrastructure.Web.Api.Operations.Shared.Health.HealthCheckRequest>>()
                .WithOpenApi(op =>
                    {
                        op.OperationId = "HealthCheck";
                        op.Description = "(request type: HealthCheckRequest)";
                        op.Responses.Clear();
                        return op;
                    });

        }
    }
}

